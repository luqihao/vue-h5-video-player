webpackJsonp([1],{0:function(e,t,i){i("j1ja"),e.exports=i("NHnr")},"181b":function(e,t){},D5te:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),r=(i("O6K2"),{props:{bufferScale:{type:Number,default:0},durationScale:{type:Number,default:0},durationLeft:{type:Number,default:0},movingTime:{type:String,default:""}},data:function(){return{isDragging:!1,movingLeft:0,movingFlag:!1}},methods:{getMovingTime:function(e){var t=e.clientX-this.$refs.track.getBoundingClientRect().left,i=this.$refs.track.getBoundingClientRect().width;t<=i&&t>=0&&(this.$emit("getMovingTime",t/i),this.movingLeft=(t-30)/i,this.movingFlag=!0)},hideMovingTime:function(){this.movingFlag=!1},bindEvents:function(){this.isDragging=!0,window.addEventListener("mousemove",this.controlsDragging,!1),window.addEventListener("mouseup",this.cancelDragging,!1)},controlsDragging:function(e){this.isDragging&&this.dumpTrack(e)},cancelDragging:function(e){this.isDragging=!1,window.removeEventListener("mousemove",this.controlsDragging,!1),window.removeEventListener("mouseup",this.cancelDragging,!1),this.$emit("cancelDragging")},dumpTrack:function(e){var t=e.clientX-this.$refs.track.getBoundingClientRect().left,i=this.$refs.track.getBoundingClientRect().width;t<=i&&t>=0&&this.$emit("dumpDurationTrack",t/i,e.type)},wheelTrack:function(e){120===e.wheelDelta&&this.$emit("wheelDurationTrack",!0),-120===e.wheelDelta&&this.$emit("wheelDurationTrack",!1)}},beforeDestroy:function(){window.removeEventListener("mousemove",this.controlsDragging,!1),window.removeEventListener("mouseup",this.cancelDragging,!1)}}),o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"track",staticClass:"progress-track",on:{mousedown:function(t){t.preventDefault(),e.dumpTrack(t)},mousewheel:function(t){t.preventDefault(),e.wheelTrack(t)},mousemove:function(t){t.preventDefault(),e.getMovingTime(t)},mouseover:function(t){t.preventDefault(),e.getMovingTime(t)},mouseout:function(t){t.preventDefault(),e.hideMovingTime(t)}}},[i("div",{staticClass:"buffered-progress-percent",style:{width:100*e.bufferScale+"%"}}),e._v(" "),i("div",{ref:"percent",staticClass:"progress-percent",style:{width:100*e.durationScale+"%"}}),e._v(" "),i("div",{ref:"control",staticClass:"progress-control",style:{left:100*(e.durationScale-e.durationLeft)+"%"},on:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.bindEvents(t)}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.movingFlag,expression:"movingFlag"}],staticClass:"movingTime",style:{left:100*e.movingLeft+"%"}},[i("b",[e._v(e._s(e.movingTime))])])])},staticRenderFns:[]};var s=i("VU/8")(r,o,!1,function(e){i("D5te")},"data-v-b48898ba",null).exports,a={props:{volume:{type:Number,default:0}},data:function(){return{isDragging:!1}},methods:{bindEvents:function(){this.isDragging=!0,window.addEventListener("mousemove",this.controlsDragging,!1),window.addEventListener("mouseup",this.cancelDragging,!1)},controlsDragging:function(e){this.isDragging&&this.dumpTrack(e)},cancelDragging:function(){this.isDragging=!1,window.removeEventListener("mousemove",this.controlsDragging,!1),window.removeEventListener("mouseup",this.cancelDragging,!1)},dumpTrack:function(e){var t=e.clientX-this.$refs.track.getBoundingClientRect().left,i=this.$refs.track.getBoundingClientRect().width;t<=i&&t>=0&&this.$emit("dumpVolumeTrack",t/i)},wheelTrack:function(e){120===e.wheelDelta&&this.$emit("wheelVolumeTrack",!0),-120===e.wheelDelta&&this.$emit("wheelVolumeTrack",!1)}},beforeDestroy:function(){window.removeEventListener("mousemove",this.controlsDragging,!1),window.removeEventListener("mouseup",this.cancelDragging,!1)}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"track",staticClass:"progress-track",on:{mousedown:function(t){t.preventDefault(),e.dumpTrack(t)},mousewheel:function(t){t.preventDefault(),e.wheelTrack(t)}}},[i("div",{ref:"percent",staticClass:"progress-percent",style:{width:50*e.volume+"px"}}),e._v(" "),i("div",{ref:"control",staticClass:"progress-control",style:{left:50*e.volume-5+"px"},on:{mousedown:function(t){t.preventDefault(),e.bindEvents(t)}}})])},staticRenderFns:[]};var u=i("VU/8")(a,l,!1,function(e){i("181b")},"data-v-05b8bfa5",null).exports,c={props:{src:{type:String,default:"http://k.youku.com/player/getFlvPath/sid/0516754378147126f334e/st/mp4/fileid/03000A0E025A5BEBBDB5FD45365AD36FCCA0AE-622A-88B9-3F8A-83B2EB141FF4?k=fc313ef9ac2e995e262024eb&hd=0&myp=0&ts=392&ctype=12&ev=1&token=0539&oip=2067890049&ep=cieVHE6IUs0H7SLbjz8bYXrhd3NaXP4J9h%2BF8NIXALkhOe3N7Eyjs%2B%2B1OItGE%2Fofd1NyE%2B2H2KOW%0AajFhYfZBqxkQ10baMPrjiPiS5aVQtpJ1FBgyc7uhsFSeRjP4&ccode=050F&duration=392&expire=18000&psid=b320c413115b4c606347d46942ad8b03&ups_client_netip=7b417f81&ups_ts=1516754378&ups_userid=&utid=cFVLEqudDDsCAbfr%2FzZxh7Ge&vid=XMzM0NDUxNjQ4MA%3D%3D&vkey=A39ed8df8b2ad2f4e08675a1da8b3dabb"},width:{type:Number,default:700},height:{type:Number,default:400}},components:{durationProgressBar:s,volumeProgressBar:u},data:function(){return{video:null,playOrPause:!0,fullscreen:0,buffer:0,current:0,duration:0,movingTime:0,volume:1,volumeTemp:1,durationScale:0,durationWidth:0,mouseMoving:!1,timer:null,error:!1,canplay:!1}},computed:{playTitle:function(){return this.playOrPause?"播放":"暂停"},volumeTitle:function(){return 0===this.volume?"取消静音":"静音"},fullScreenTitle:function(){return this.fullscreen?"取消全屏":"全屏"}},mounted:function(){var e=this;this.$nextTick(function(){e.durationWidth=e.$refs.durationProgressBar.$el.getBoundingClientRect().width,e.bindFullscreenChange(),window.addEventListener("keydown",e.keydown.bind(e),!1)})},methods:{fullscreenChange:function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;this.fullscreen=e?1:0,this.durationWidth=this.$refs.durationProgressBar.$el.getBoundingClientRect().width},bindFullscreenChange:function(){var e=this;["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(t){document.addEventListener(t,e.fullscreenChange.bind(e))})},keydown:function(e){if(32===e.keyCode){if(window.event){try{e.keyCode=0}catch(e){}e.returnValue=!1}else e.preventDefault();this.fullscreen&&this.playToggle()}},show:function(){var e=this;this.mouseMoving=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){e.mouseMoving=!1,clearTimeout(e.timer)},2e3)},playToggle:function(){this.playOrPause?(this.video.play(),this.canplay=!0):this.video.pause(),this.playOrPause=!this.playOrPause},volumeToggle:function(){this.volume=0===this.volume?0===this.volumeTemp?1:this.volumeTemp:0},fullScreenToggle:function(){var e=this;if(this.fullscreen)try{["exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen"].forEach(function(e){if(e in document)throw document[e](),e})}catch(e){}else try{["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"].forEach(function(t){if(t in e.$refs.player)throw e.$refs.player[t](),t})}catch(e){}},getMovingTime:function(e){this.movingTime=this.duration*e},play:function(){var e=this;setTimeout(function(){e.playOrPause||e.video.play()},20)},pause:function(){this.video.pause()},createPlayer:function(){this.video=this.$refs.video,this.current=this.video.currentTime,this.volume=this.video.volume,this.duration=this.video.duration},onCanplay:function(){this.canplay=!0},onTimeupdate:function(){this.current=this.video.currentTime},onProgress:function(){try{this.buffer=this.$refs.video.buffered.end(0)}catch(e){}},onEnded:function(){this.playOrPause=!0},onError:function(){this.error=!0},onWaiting:function(){this.canplay=!1},onSeeked:function(){this.canplay=!0},dumpVolumeTrack:function(e){this.volume=e,this.volumeTemp=e},wheelVolumeTrack:function(e){e?this.volume+.02<=1&&(this.volume=this.volume+.02):this.volume-.02>=0&&(this.volume=this.volume-.02),this.volumeTemp=this.volume},dumpDurationTrack:function(e,t){this.current=this.duration*e,this.video.currentTime=this.current,"mousemove"===t&&this.pause()},wheelDurationTrack:function(e){e?this.current+2<=this.duration&&(this.current+=2,this.video.currentTime=this.current):this.current-2>=0&&(this.current-=2,this.video.currentTime=this.current)}},filters:{formateTime:function(e){var t=[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)],i=t[0],n=t[1],r=t[2];return i=i>=3600?i<10?"0"+i:i:"",n=n<10?"0"+n:n,r=r<10?"0"+r:r,i?i+":"+n+":"+r:n+":"+r},formateVolume:function(e){return Math.floor(100*e)}},watch:{volume:function(e){this.video.volume=e},playOrPause:function(){this.show()}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"video-player-fullScreen":e.fullscreen},style:{width:e.width+"px",height:e.height+"px"},attrs:{id:"video-player"},on:{mousemove:e.show}},[i("div",{ref:"player",staticClass:"player"},[i("video",{ref:"video",attrs:{id:"video",width:"100%",height:"100%",src:e.src,controls:!1},on:{loadedmetadata:e.createPlayer,progress:e.onProgress,canplay:e.onCanplay,canplaythrough:e.onProgress,timeupdate:e.onTimeupdate,ended:e.onEnded,error:e.onError,waiting:e.onWaiting,seeked:e.onSeeked,click:e.playToggle}},[e._v("\n      您的浏览器版本过低，并不支持video标签，请升级！\n    ")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.canplay||e.error||e.playOrPause,expression:"!canplay || error || playOrPause"}],staticClass:"shadow",on:{click:function(t){t.preventDefault(),e.playToggle(t)}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.canplay&&!e.error,expression:"!canplay && !error"}],staticClass:"loading"},[i("div",{staticClass:"circle circle1"}),e._v(" "),i("div",{staticClass:"circle circle2"}),e._v(" "),i("div",{staticClass:"circle circle3"})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.playOrPause&&e.canplay,expression:"playOrPause && canplay"}],staticClass:"pausing hover",on:{click:function(t){t.preventDefault(),e.playToggle(t)}}},[i("i",{staticClass:"icon icon-play"})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"error"},[i("p",[e._v("播放源出现问题...")])]),e._v(" "),i("div",{staticClass:"video-controls-wrapper",class:{hover:e.mouseMoving}},[i("div",{staticClass:"btn hover",attrs:{title:e.playTitle},on:{click:e.playToggle}},[i("i",{class:{"icon icon-play":e.playOrPause,"icon icon-pause":!e.playOrPause}})]),e._v(" "),i("div",{staticClass:"track-progress-bar-wrapper"},[i("duration-progress-bar",{ref:"durationProgressBar",attrs:{bufferScale:e.buffer/e.duration,durationScale:e.current/e.duration,durationLeft:5/e.durationWidth,movingTime:e._f("formateTime")(e.movingTime)},on:{getMovingTime:e.getMovingTime,dumpDurationTrack:e.dumpDurationTrack,cancelDragging:e.play,wheelDurationTrack:e.wheelDurationTrack}})],1),e._v(" "),i("div",{staticClass:"text text-s text-padding"},[i("b",[e._v(e._s(e._f("formateTime")(e.current)))]),e._v("\n        /\n        "),i("b",[e._v(e._s(e._f("formateTime")(e.duration)))])]),e._v(" "),i("div",{staticClass:"btn hover",attrs:{title:e.volumeTitle},on:{click:e.volumeToggle}},[i("i",{class:{"icon icon-volume-medium":e.volume>.5&&e.volume<=1,"icon icon-volume-low":e.volume>0&&e.volume<=.5,"icon icon-volume-mute":0===e.volume}})]),e._v(" "),i("div",{staticClass:"volume-progress-bar-wrapper"},[i("volume-progress-bar",{attrs:{volume:e.volume},on:{dumpVolumeTrack:e.dumpVolumeTrack,wheelVolumeTrack:e.wheelVolumeTrack}})],1),e._v(" "),i("div",{staticClass:"btn text text-s"},[i("b",[e._v(e._s(e._f("formateVolume")(e.volume)))])]),e._v(" "),i("div",{ref:"fullscreen",staticClass:"btn hover",attrs:{title:e.fullScreenTitle},on:{click:e.fullScreenToggle}},[i("i",{class:{"icon icon-fullscreen":!e.fullscreen,"icon icon-notFullscreen":e.fullscreen}})])])])])},staticRenderFns:[]};var v={name:"app",components:{player:i("VU/8")(c,d,!1,function(e){i("ksPn")},"data-v-cf7fae4c",null).exports}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("h1",[this._v("vue-h5-video-player")]),this._v(" "),t("player")],1)},staticRenderFns:[]};var h=i("VU/8")(v,m,!1,function(e){i("fCD6")},null,null).exports;i("j1ja");n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:h}})},O6K2:function(e,t){},fCD6:function(e,t){},ksPn:function(e,t){}},[0]);
//# sourceMappingURL=app.fb31057fae792da7f762.js.map